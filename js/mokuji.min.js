(function(a){a.fn.mokuji=function(p){var e={contentspace:"body",titletag:"h1,h2,h3,h4,h5,h6",dot:false,decimal:true};var d=a.extend(e,p);var m=d.titletag.split(",");var q=[];var g=1;a.each(m,function(r,s){q.push(d.contentspace+" "+s)});q=q.join(",");var g=1;this.addClass("mokujibox");a(".mokujibox").append("<p>目次</p>");a(".mokujibox").append("<ul></ul>");a(q).each(function(){var i=a(this).text();this.id="tid-"+g;g++;a(".mokujibox").children("ul").append('<li><a href="#'+this.id+'">'+i+"</a></li>")});if(d.dot==false){a(".mokujibox").find("li").addClass("dot-none")}var o=1;var c=1;var k=1;var n=1;var b=1;var j=1;var l=0;if(d.decimal==true){a(q).each(function(){switch(a(this).get(0).tagName){case"H1":c=1;k=1;n=1;b=1;j=1;a(".mokujibox").find("li").eq(l).children("a").prepend(o+".");l++;o++;break;case"H2":k=1;n=1;b=1;j=1;a(".mokujibox").find("li").eq(l).children("a").prepend(c+".");if(o>1){a(".mokujibox").find("li").eq(l).children("a").prepend((o-1)+"-")}l++;c++;break;case"H3":n=1;b=1;j=1;a(".mokujibox").find("li").eq(l).children("a").prepend(k+".");if(o>1){a(".mokujibox").find("li").eq(l).children("a").prepend((o-1)+"-"+(c-1)+"-")}else{if(c>1){a(".mokujibox").find("li").eq(l).children("a").prepend((c-1)+"-")}}l++;k++;break;case"H4":b=1;j=1;a(".mokujibox").find("li").eq(l).children("a").prepend(n+".");if(o>1){a(".mokujibox").find("li").eq(l).children("a").prepend((o-1)+"-"+(c-1)+"-"+(k-1)+"-")}else{if(c>1){a(".mokujibox").find("li").eq(l).children("a").prepend((c-1)+"-"+(k-1)+"-")}else{if(k>1){a(".mokujibox").find("li").eq(l).children("a").prepend((k-1)+"-")}}}l++;n++;break;case"H5":j=1;a(".mokujibox").find("li").eq(l).children("a").prepend(b+".");if(o>1){a(".mokujibox").find("li").eq(l).children("a").prepend((o-1)+"-"+(c-1)+"-"+(k-1)+"-"+(n-1)+"-")}else{if(c>1){a(".mokujibox").find("li").eq(l).children("a").prepend((c-1)+"-"+(k-1)+"-"+(n-1)+"-")}else{if(k>1){a(".mokujibox").find("li").eq(l).children("a").prepend((k-1)+"-"+(n-1)+"-")}else{if(n>1){a(".mokujibox").find("li").eq(l).children("a").prepend((n-1)+"-")}}}}l++;b++;break;case"H6":a(".mokujibox").find("li").eq(l).children("a").prepend(j+".");if(o>1){a(".mokujibox").find("li").eq(l).children("a").prepend((o-1)+"-"+(c-1)+"-"+(k-1)+"-"+(n-1)+"-"+(b-1)+"-")}else{if(c>1){a(".mokujibox").find("li").eq(l).children("a").prepend((c-1)+"-"+(k-1)+"-"+(n-1)+"-"+(b-1)+"-")}else{if(k>1){a(".mokujibox").find("li").eq(l).children("a").prepend((k-1)+"-"+(n-1)+"-"+(b-1)+"-")}else{if(n>1){a(".mokujibox").find("li").eq(l).children("a").prepend((n-1)+"-"+(b-1)+"-")}else{if(b>1){a(".mokujibox").find("li").eq(l).children("a").prepend((b-1)+"-")}}}}}l++;j++;break}});var f=0;for(var h=0;h<l;h++){f=a(".mokujibox").find("li").eq(h).children("a").text().indexOf(".");switch(f){case 1:a(".mokujibox").find("li").eq(h).addClass("indent-1");break;case 3:a(".mokujibox").find("li").eq(h).addClass("indent-2");break;case 5:a(".mokujibox").find("li").eq(h).addClass("indent-3");break;case 7:a(".mokujibox").find("li").eq(h).addClass("indent-4");break;case 9:a(".mokujibox").find("li").eq(h).addClass("indent-5");break;case 11:a(".mokujibox").find("li").eq(h).addClass("indent-6");break}}}}})(jQuery);